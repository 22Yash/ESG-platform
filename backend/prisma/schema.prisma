generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String        @id @default(cuid())
  firstName    String?
  lastName     String?
  email        String        @unique
  password     String
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  esgResponses ESGResponse[]
  responses    Response[]
}

model ESGResponse {
  id                              String   @id @default(uuid())
  userId                          String
  year                            Int
  createdAt                       DateTime @default(now())
  updatedAt                       DateTime @updatedAt
  totalElectricityConsumption     Float?
  renewableElectricityConsumption Float?
  totalFuelConsumption            Float?
  carbonEmissions                 Float?
  totalEmployees                  Int?
  femaleEmployees                 Int?
  averageTrainingHours            Float?
  communityInvestment             Float?
  independentBoardMembers         Float?
  hasDataPrivacyPolicy            Boolean?
  totalRevenue                    Float?
  carbonIntensity                 Float?
  renewableElectricityRatio       Float?
  diversityRatio                  Float?
  communitySpendRatio             Float?
  user                            User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, year])
}

model Response {
  id        String   @id @default(cuid())
  userId    String
  year      Int?
  data      Json
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}
